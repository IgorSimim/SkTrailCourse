@{
    ViewData["Title"] = "ZoopIA";
}

<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="/img/logo.png" />
    <title>@ViewData["Title"]</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet" />
</head>

<body>
    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10 col-xl-8">
                <div class="terminal-container">

                    <!-- HEADER -->
                    <div class="terminal-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center">
                                <img src="/img/logo.png" alt="Logo ZoopIA">
                                <div>
                                    <h3 class="mb-1">ZoopIA</h3>
                                    <p>Plataforma de rastreamento e anÃ¡lise de disputas de cobranÃ§a</p>
                                </div>
                            </div>
                            <div>
                                <button class="btn btn-sm btn-header-control me-2" onclick="clearTerminal()">
                                    <span class="icon-text">âŸ³</span> Limpar
                                </button>
                                <button class="btn btn-sm btn-header-control" data-bs-toggle="modal"
                                    data-bs-target="#helpModal">
                                    <span class="icon-text">i</span> Ajuda
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- TERMINAL OUTPUT -->
                    <div class="terminal-body" id="terminalOutput">
                        <div id="outputText"></div>
                    </div>

                    <!-- INPUT CONTAINER -->
                    <div class="terminal-input-container">
                        <div id="normalInput">
                            <div class="input-group">
                                <span class="input-group-text">ðŸ’¬</span>
                                <input type="text" class="form-control terminal-input" id="commandInput"
                                    placeholder="Descreva a cobranÃ§a que nÃ£o reconhece (ex: 'CobranÃ§a de 39,90 da FitEasy')..."
                                    autocomplete="off" autofocus>
                                <button class="btn btn-terminal" id="sendButton" onclick="sendCommand()">
                                    <span id="sendText">Enviar</span>
                                    <span id="loadingSpinner" class="spinner-border spinner-border-sm d-none"
                                        role="status"></span>
                                </button>
                            </div>
                        </div>

                        <div id="cpfInput" class="mt-3" style="display:none">
                            <div class="input-group">
                                <span class="input-group-text">ðŸ‘¤</span>
                                <input type="text" class="form-control terminal-input" id="customerCpfInput"
                                    placeholder="Digite seu CPF (apenas nÃºmeros)" autocomplete="off">
                                <button class="btn btn-terminal" onclick="searchBoletos()">
                                    <span>Consultar Boletos</span>
                                </button>
                                <button class="btn btn-secondary" onclick="cancelCpfInput()">Cancelar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL DE AJUDA -->
    <div class="modal fade" id="helpModal" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg mx-auto">
            <div class="modal-content text-white">
                <div class="modal-header border-0">
                    <h4 class="modal-title fw-bold" id="helpModalLabel">ðŸ’¡ Ajuda - comandos</h4>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>

                <div class="modal-body help-modal-body">
                    <div class="command-card">
                        <span class="command-badge bg-info">Listar empresas</span>
                        <p class="command-desc">Mostra empresas cadastradas</p>
                    </div>

                    <div class="command-card">
                        <span class="command-badge bg-secondary">Mostrar ABC123</span>
                        <p class="command-desc">Detalhes de uma disputa especÃ­fica</p>
                    </div>

                    <div class="command-card">
                        <span class="command-badge bg-success">Atualizar ABC123 para resolvida</span>
                        <p class="command-desc">Atualiza status de uma disputa</p>
                    </div>

                    <div class="command-card">
                        <span class="command-badge bg-danger">Excluir ABC123</span>
                        <p class="command-desc">Remove uma disputa</p>
                    </div>

                    <p class="command-tip">
                        ðŸ’¡ Dica: descreva o problema com detalhes (valor, data, estabelecimento) para facilitar a
                        anÃ¡lise automÃ¡tica.
                    </p>
                </div>

                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-terminal rounded px-4 py-2"
                        data-bs-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/terminal.js"></script>
</body>

</html>